"use strict";(self.webpackChunkhk_independent_bus_eta=self.webpackChunkhk_independent_bus_eta||[]).push([[360],{2683:function(e,n,t){t.r(n),t.d(n,{default:function(){return qn}});var r,o,a=t(1413),i=t(7313),l=t(7912),s=(t(3331),t(7458)),c=t(4778),u=t(6396),d=t(2135),p=t(8467),x=t(3346),f=t(5296),g=t(6060),h=t(178),m=t(2481),j=t(7829),Z=t(9856),b=t(9237),v=t(5919),y=t(7983),C=t(180),k=t(4737),w=t(2495),_=t(4511),S=t(5823),T=t(6417),I=function(){var e=(0,_.$)(),n=e.t,t=e.i18n,r=(0,p.TH)(),o=(0,i.useContext)(g.Z),a=o.selectedRoute,l=o.colorMode,s=o.vibrateDuration,c=(0,p.s0)(),u=function(e,n){n.preventDefault(),(0,S.tp)(s),setTimeout((function(){return c(e)}),0)};return(0,i.useMemo)((function(){return(0,T.jsxs)(Z.Z,{value:r.pathname.replace(/(.*)\/[0-9]*?$/,"$1"),showLabels:!0,sx:W,children:[(0,T.jsx)(b.Z,{label:n("\u9996\u9801"),component:d.rU,to:"/".concat(t.language),onClick:function(e){return u("/".concat(t.language),e)},value:"/".concat(t.language),icon:(0,T.jsx)(v.Z,{})}),(0,T.jsx)(b.Z,{label:n("\u641c\u5c0b"),component:d.rU,to:"/".concat(t.language,"/board"),onClick:function(e){return u("/".concat(t.language,"/board"),e)},value:"/".concat(t.language,"/board"),icon:(0,T.jsx)(y.Z,{})}),(0,T.jsx)(b.Z,{label:a.split("-")[0],component:d.rU,to:"/".concat(t.language,"/route/").concat(a.replace(/(.*)\/.*$/,"$1").toLowerCase()),onClick:function(e){return u("/".concat(t.language,"/route/").concat(a.toLowerCase()),e)},value:"/".concat(t.language,"/route/").concat(a.replace(/(.*)\/.*$/,"$1").toLowerCase()),icon:(0,T.jsx)(k.Z,{}),style:{textTransform:"uppercase"}}),(0,T.jsx)(b.Z,{label:n("\u898f\u5283"),component:d.rU,to:"/".concat(t.language,"/search"),onClick:function(e){return u("/".concat(t.language,"/search"),e)},value:"/".concat(t.language,"/search"),icon:(0,T.jsx)(C.Z,{})}),(0,T.jsx)(b.Z,{label:n("\u8a2d\u5b9a"),component:d.rU,to:"/".concat(t.language,"/settings"),rel:"nofollow",onClick:function(e){return u("/".concat(t.language,"/settings"),e)},value:"/".concat(t.language,"/settings"),icon:(0,T.jsx)(w.Z,{})})]})}),[r.pathname,t.language,l,a,s])},W={background:function(e){return"dark"===e.palette.mode?e.palette.background.default:e.palette.primary.main},bottom:"0",height:"initial","& .MuiBottomNavigationAction-root":{width:"20%",padding:"6px 0",minWidth:0},"& .MuiBottomNavigationAction-label":{fontSize:"0.875rem"},"& *.Mui-selected":{color:function(e){return"dark"===e.palette.mode?e.palette.primary.main:e.palette.text.primary}}},A=t(9289),R=t(1113),N=t(2461),D=t(8119),P=t(7131),E=t(9099),H=t(647),L=t(9439),M=function(){var e=(0,i.useState)({}),n=(0,L.Z)(e,2),t=n[0],r=n[1];return(0,i.useEffect)((function(){var e=!0,n=function(){return"prerendering"===navigator.userAgent?(r({}),new Promise((function(e){return e([])}))):fetch("https://data.weather.gov.hk/weatherAPI/opendata/weather.php?dataType=warnsum&lang=en").then((function(e){return e.json()})).then((function(n){e&&r(n)}))},t=setInterval((function(){n()}),3e5);return n(),function(){e=!1,clearInterval(t)}}),[r]),t},$=["TC10","TC9","TC8SW","TC8NW","TC8SE","TC8NE","WRAINB","WRAINR","TC3","TC1","WRAINA","WL","WTS","WFNTSA","WHOT","WCOLD","WMSGNL"],F={TC10:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/No._10_Hurricane_Signal.png/30px-No._10_Hurricane_Signal.png",TC9:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7a/No._09_Increasing_Gale_or_Storm_Signal.png/30px-No._09_Increasing_Gale_or_Storm_Signal.png",TC8SW:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/No._8_Southwest_Gale_or_Storm_Signal.png/30px-No._8_Southwest_Gale_or_Storm_Signal.png",TC8NW:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/17/No._8_Northwest_Gale_or_Storm_Signal.png/30px-No._8_Northwest_Gale_or_Storm_Signal.png",TC8SE:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/No._8_Southeast_Gale_or_Storm_Signal.png/30px-No._8_Southeast_Gale_or_Storm_Signal.png",TC8NE:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/49/No._8_Northeast_Gale_or_Storm_Signal.png/30px-No._8_Northeast_Gale_or_Storm_Signal.png",WRAINB:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c0/Black_Rainstorm_Signal.png/25px-Black_Rainstorm_Signal.png",WRAINR:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Red_Rainstorm_Signal.png/25px-Red_Rainstorm_Signal.png",TC3:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/No._03_Strong_Wind_Signal.png/30px-No._03_Strong_Wind_Signal.png",TC1:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/No._01_Standby_Signal.png/30px-No._01_Standby_Signal.png",WRAINA:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Amber_Rainstorm_Signal.png/25px-Amber_Rainstorm_Signal.png",WL:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5b/Landslip.gif/25px-Landslip.gif",WTS:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/Thunderstorm_Warning.png/25px-Thunderstorm_Warning.png",WFNTSA:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/cd/Ntfl.gif/25px-Ntfl.gif",WHOT:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Very_Hot_Weather_Warning.png/25px-Very_Hot_Weather_Warning.png",WCOLD:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Cold_Weather_Warning.png/25px-Cold_Weather_Warning.png",WMSGNL:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/HK_Monsoon_Signal.png/25px-HK_Monsoon_Signal.png"},O=function(){var e=(0,i.useContext)(g.Z),n=e.searchRoute,t=e.setSearchRoute,r=e.db.routeList,o=e.colorMode,a=e.vibrateDuration,l=e.geoPermission,s=e.updateGeolocation,c=e.changeLanguage,u=(0,_.$)(),x=u.t,f=u.i18n,h=(0,p.TH)(),m=(0,p.s0)(),Z=function(){var e=M();return Object.values(e).map((function(e){return e.code})).filter((function(e){return $.indexOf(e)>=0})).sort((function(e,n){return $.indexOf(e)<$.indexOf(n)?-1:1}))}(),b=(0,i.useCallback)((function(){try{navigator.geolocation.getCurrentPosition((function(e){var n=e.coords,t=n.latitude,r=n.longitude;s({lat:t,lng:r})}))}catch(e){console.log("error in getting location")}}),[s]),v=(0,i.useCallback)((function(e){var r=e.key,o=e.ctrlKey,a=e.altKey,i=e.metaKey,l=e.target;o||a||i||"INPUT"!==l.tagName.toUpperCase()&&"TEXTAREA"!==l.tagName.toUpperCase()&&("Escape"===r?t(""):"Backspace"===r?t(n.slice(0,-1)):1===r.length&&(t(n+r),m("/".concat(f.language,"/board"),{replace:!0})))}),[n,f.language,t]);return(0,i.useEffect)((function(){return window.addEventListener("keydown",v),function(){window.removeEventListener("keydown",v)}}),[v]),(0,i.useMemo)((function(){return(0,T.jsxs)(A.Z,{sx:z,children:[(0,T.jsx)(d.rU,{to:"/".concat(f.language),onClick:function(e){e.preventDefault(),(0,S.tp)(a),m("/".concat(f.language))},rel:"nofollow",children:(0,T.jsx)(R.Z,{component:"h1",variant:"subtitle2",sx:B,children:x("\u5df4\u58eb\u5230\u7ad9\u9810\u5831")})}),(0,T.jsx)(N.Z,{id:"searchInput",sx:U,type:"text",value:n,placeholder:x("\u5df4\u58eb\u7dda"),onChange:function(e){(e.target.value.toUpperCase()in r||e.target.value in r)&&(document.activeElement.blur(),m("/".concat(f.language,"/route/").concat(e.target.value))),t(e.target.value)},onFocus:function(){(0,S.tp)(a),"prerendering"!==navigator.userAgent&&(0,S.z4)()&&document.activeElement.blur(),m("/".concat(f.language,"/board"),{replace:!0})}}),(0,T.jsxs)(j.Z,{sx:G,children:[Z.slice(0,2).map((function(e){return(0,T.jsx)(D.Z,{onClick:function(){return window.open("https://www.hko.gov.hk/".concat("zh"===f.language?"tc":"en","/detail.htm"))},variant:"square",src:F[e],sx:K},e)})),"granted"===l&&(0,T.jsx)(P.Z,{"aria-label":"relocate",onClick:function(){return b()},children:(0,T.jsx)(H.Z,{})}),(0,T.jsx)(E.Z,{sx:q,onClick:function(){return e="zh"===f.language?"en":"zh",(0,S.tp)(a),m(h.pathname.replace("/"+f.language,"/"+e),{replace:!0}),void c(e);var e},id:"lang-selector",variant:"text",disableElevation:!0,disableRipple:!0,children:"zh"!==f.language?"\u7e41":"En"}),(0,T.jsx)(P.Z,{component:d.rU,to:"/".concat(f.language,"/settings"),rel:"nofollow",children:(0,T.jsx)(w.Z,{fontSize:"small"})})]})]})}),[n,f.language,h.pathname,o,l,a,Z])},z={backgroundColor:function(e){return"dark"===e.palette.mode?e.palette.background.default:e.palette.primary.main},"& a":{textDecoration:"none"},display:"flex",justifyContent:"space-between",px:1},B={color:function(e){return"dark"===e.palette.mode?e.palette.primary.main:e.palette.text.primary}},U={maxWidth:"100px","& input":{textAlign:"center"},"& input::before":{borderBottom:function(e){return"1px ".concat(e.palette.text.primary," solid")}}},G={display:"flex",alignItems:"center"},q={color:function(e){return e.palette.text.primary},minWidth:"40px",p:1,borderRadius:5,fontWeight:900,textTransform:"none"},K={background:"white",height:24,width:24,m:1},V=function(){var e=(0,_.$)().t,n=(0,i.useContext)(g.Z),t=n.analytics,r=n.toggleAnalytics,o=(0,i.useState)(!t&&!Boolean(localStorage.getItem("consent"))&&!(0,S.vS)()),a=(0,L.Z)(o,2),l=a[0],s=a[1],c=(0,i.useCallback)((function(){r(),s((function(){return localStorage.setItem("consent","yes"),!1}))}),[s,r]),u=(0,i.useCallback)((function(){s((function(){return localStorage.setItem("consent","no"),!1}))}),[s]);return l?(0,T.jsxs)(j.Z,{sx:J,children:[(0,T.jsx)(R.Z,{variant:"subtitle2",sx:X,children:e("We'd like to set analytics cookies that help us improve hkbus.app by measuring how you use it.")}),(0,T.jsxs)(j.Z,{sx:Q,children:[(0,T.jsx)(E.Z,{size:"small",variant:"contained",sx:{color:"#000"},onClick:c,children:e("Accept")}),(0,T.jsx)(E.Z,{size:"small",variant:"outlined",color:"error",onClick:u,children:e("Reject")})]})]}):(0,T.jsx)(T.Fragment,{})},J={background:"#333",display:"flex",alignSelf:"flex-end"},Q={display:"flex",alignItems:"center",gap:1,p:1},X={p:1,color:"#fff"},Y=t(3947),ee=t(6330),ne=t(3795),te=t(7943),re=function(e){var n=e.name,t=e.list,r=e.collectionIdx,o=void 0===r?null:r,l=(0,_.$)().t,s=(0,i.useContext)(g.Z),c=s.collectionDrawerRoute,u=s.db.routeList,d=s.toggleCollectionDialog,p=s.toggleCollectionEta;return(0,T.jsxs)(j.Z,{sx:oe,children:[(0,T.jsxs)(j.Z,{sx:(0,a.Z)((0,a.Z)({},ae),{},{cursor:null!==o?"pointer":"auto"}),onClick:function(){return d(o)},children:[(0,T.jsx)(D.Z,{children:n.charAt(0)}),(0,T.jsxs)(j.Z,{sx:ie,children:[(0,T.jsx)(R.Z,{variant:"body1",children:n}),(0,T.jsxs)(R.Z,{variant:"caption",children:[l("Number of ETAs: "),t.filter((function(e){return void 0!==u[e.split("/")[0]]})).length]})]})]}),(0,T.jsx)(j.Z,{sx:le,children:(0,T.jsx)(ee.Z,{icon:(0,T.jsx)(ne.Z,{}),checkedIcon:(0,T.jsx)(te.Z,{}),checked:t.includes(c),onClick:function(){return p(c,o)}})})]})},oe={flex:1,display:"flex",justifyContent:"space-between"},ae={display:"flex",alignItems:"center",gap:2,flex:1,"& .MuiAvatar-colorDefault":{color:function(e){return"dark"===e.palette.mode?e.palette.background.default:"white"}}},ie={display:"flex",flexDirection:"column"},le={display:"flex"},se=t(6555),ce=t(2040),ue=t(4942),de=t(4469),pe=t(6467),xe=t(2392),fe=t(8485),ge=t(5280),he=t(4117),me=t(7605),je=t(7327),Ze=t(3208),be=t(9765),ve=t(5904),ye=t(8443),Ce=t(8790),ke=t(658),we=t.n(ke),_e=function(){var e=(0,_.$)().t,n=(0,i.useContext)(g.Z),t=n.collections,r=n.collectionIdx,o=n.updateCollectionSchedule,a=n.addCollectionSchedule,l=n.removeCollectionSchedule;return(0,T.jsx)(Ze._,{dateAdapter:ve.y,children:(0,T.jsxs)(j.Z,{sx:Se,children:[t[r].schedules.map((function(n,t){return(0,T.jsxs)(j.Z,{sx:Te,children:[(0,T.jsx)(P.Z,{size:"small",onClick:function(){return l(t)},children:(0,T.jsx)(ye.Z,{})}),(0,T.jsx)(xe.Z,{variant:"standard",value:n.day,select:!0,size:"small",onChange:function(e){var n=e.target.value;return o(t,"day",parseInt(n))},children:Array(7).fill(0).map((function(n,r){return(0,T.jsx)(je.Z,{value:r,children:e("weekday-".concat(r))},"option-".concat(t,"-").concat(r))}))}),(0,T.jsx)(be.d,{sx:{flex:.45},slotProps:{textField:{size:"small",variant:"standard"}},value:we()("1991-12-02".concat(n.start.hour,":").concat(n.start.minute)),onChange:function(e){return o(t,"start",{hour:e.$H,minute:e.$m})}}),"-",(0,T.jsx)(be.d,{sx:{flex:.45},slotProps:{textField:{size:"small",variant:"standard"}},value:we()("1991-12-02T".concat(n.end.hour,":").concat(n.end.minute)),onChange:function(e){return o(t,"end",{hour:e.$H,minute:e.$m})}})]},"schedule-".concat(t))})),(0,T.jsx)(E.Z,{onClick:function(){return a()},children:(0,T.jsx)(Ce.Z,{})})]})})},Se={display:"flex",flexDirection:"column",gap:1.5,fontSize:"0.8em !important"},Te={display:"flex",justifyContent:"space-between",alignItems:"center",gap:.5},Ie=t(1757),We=t(1660),Ae=function(){var e=(0,i.useContext)(g.Z),n=e.db.routeList,t=e.collections,r=e.collectionIdx,o=e.setCollectionEtas,l=(0,i.useState)(t[r].list.filter((function(e){return e.split("/")[0]in n})).reverse()),s=(0,L.Z)(l,2),c=s[0],u=s[1],d=(0,_.$)().t,p=(0,i.useCallback)((function(e){var n=e.destination,t=e.source;if(n){var r=(0,S.HP)(c,t.index,n.index);u(r),o(Array.from(r).reverse())}}),[c,u,o]);return(0,T.jsx)(Ie.Z5,{onDragEnd:p,children:(0,T.jsx)(Ie.bK,{droppableId:"saved-eta-list",children:function(e){return(0,T.jsxs)(j.Z,(0,a.Z)((0,a.Z)({ref:e.innerRef},e.droppableProps),{},{children:[c.length?c.map((function(e,n){return(0,T.jsx)(Re,{item:e,index:n},"savedEta-".concat(e))})):(0,T.jsx)(R.Z,{sx:{textAlign:"center",marginTop:5},children:(0,T.jsx)("b",{children:d("\u672a\u6709\u6536\u85cf\u5605\u8def\u7dda\u3002")})}),e.placeholder]}))}})})},Re=function(e){var n=e.item,t=e.index;return(0,T.jsx)(Ie._l,{draggableId:n,index:t,children:function(e){return(0,T.jsx)(j.Z,(0,a.Z)((0,a.Z)((0,a.Z)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:(0,T.jsx)(We.Z,{routeId:n,disabled:!0})}))}})},Ne=function(){var e=(0,i.useContext)(g.Z),n=e.collections,t=e.collectionIdx,r=e.toggleCollectionDialog,o=e.updateCollectionName,a=e.removeCollection,l=(0,_.$)().t,s=(0,i.useState)("routes"),c=(0,L.Z)(s,2),u=c[0],d=c[1];return null===t?null:(0,T.jsxs)(de.Z,{open:null!==t,onClose:function(){r(null)},fullWidth:!0,children:[(0,T.jsxs)(pe.Z,{sx:De,children:[(0,T.jsx)(xe.Z,{id:"collection-input",variant:"standard",value:n[t].name,onChange:function(e){var n=e.target.value;return o(n)},fullWidth:!0}),(0,T.jsxs)(fe.Z,{value:u,onChange:function(e,n){return d(n)},sx:Le,children:[(0,T.jsx)(ge.Z,{value:"routes",label:l("\u8def\u7dda")}),(0,T.jsx)(ge.Z,{value:"time",label:l("\u986f\u793a\u6642\u9593")})]}),(0,T.jsxs)(j.Z,{sx:Pe,children:["routes"===u&&(0,T.jsx)(Ae,{}),"time"===u&&(0,T.jsx)(_e,{})]})]}),(0,T.jsx)(he.Z,{sx:Ee,children:(0,T.jsx)(P.Z,{onClick:function(){return a(t)},sx:He,children:(0,T.jsx)(me.Z,{})})})]})},De={display:"flex",flexDirection:"column",gap:1},Pe={height:"50vh",pr:1,overflow:"scroll","&::-webkit-scrollbar":{display:"none"}},Ee={display:"flex",justifyContent:"flex-start"},He={opacity:.3,"&:hover":{opacity:1}},Le=(r={minHeight:"36px"},(0,ue.Z)(r,"& .MuiTab-root",(0,ue.Z)({alignItems:"center",justifyContent:"center",paddingTop:0,paddingBottom:0,minHeight:"32px"},"&.Mui-selected",{color:function(e){return"dark"===e.palette.mode?e.palette.primary.main:"black"}})),(0,ue.Z)(r,"& .MuiTabs-flexContainer",{justifyContent:"center"}),(0,ue.Z)(r,"& .MuiTabs-indicator",{backgroundColor:function(e){return"dark"===e.palette.mode?e.palette.primary.main:"black"}}),r),Me=function(){var e=(0,_.$)().t,n=(0,i.useContext)(g.Z),t=n.collectionDrawerRoute,r=n.setCollectionDrawerRoute,o=n.savedEtas,a=n.collections,l=n.addNewCollection;return(0,T.jsxs)(Y.ZP,{anchor:"bottom",open:null!==t,onClose:function(){return r(null)},PaperProps:{sx:$e},children:[(0,T.jsxs)(j.Z,{sx:Fe,children:[(0,T.jsx)(se.Z,{sx:Oe}),(0,T.jsx)(j.Z,{sx:ze,children:(0,T.jsx)(re,{name:e("\u5e38\u7528"),list:o})}),(0,T.jsxs)(j.Z,{sx:Be,children:[(0,T.jsx)(R.Z,{variant:"h6",children:e("Collections")}),(0,T.jsx)(P.Z,{onClick:l,children:(0,T.jsx)(ce.Z,{})})]}),(0,T.jsx)(j.Z,{sx:Ue,children:a.map((function(e,n){var t=e.name,r=e.list;return(0,T.jsx)(re,{name:t,list:r,collectionIdx:n},"collection-".concat(n))}))})]}),(0,T.jsx)(Ne,{})]})},$e={borderTopLeftRadius:10,borderTopRightRadius:10},Fe={maxHeight:"50vh",minHeight:"30vh",display:"flex",flexDirection:"column",px:2,py:1},Oe={alignSelf:"center"},ze={display:"flex",mb:1},Be={display:"flex",justifyContent:"space-between"},Ue={display:"flex",flexDirection:"column",gap:2,overflow:"scroll"},Ge={display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"},qe={display:"flex",flexDirection:"column",flex:1,overflow:"hidden",backgroundColor:function(e){return e.palette.background.default}},Ke=function(){return(0,T.jsxs)(h.Z,{maxWidth:"xs",disableGutters:!0,sx:Ge,children:[(0,T.jsx)(m.ZP,{}),(0,T.jsx)(O,{}),(0,T.jsxs)(j.Z,{sx:qe,children:[(0,T.jsx)(V,{}),(0,T.jsx)(p.j3,{})]}),(0,T.jsx)(I,{}),(0,T.jsx)(Me,{})]})},Ve=t(501),Je=t(282),Qe=t(936),Xe=t.n(Qe),Ye=t(9622),en=t(6584),nn=t(5943),tn=function(e){var n=e.homeTab,t=e.onChangeTab,r=(0,_.$)().t;return(0,T.jsxs)(fe.Z,{value:n,onChange:function(e,n){return t(n,!0)},sx:rn,children:[(0,T.jsx)(ge.Z,{iconPosition:"start",icon:(0,T.jsx)(Ye.Z,{}),label:r("\u7d9c\u5408"),value:"both",disableRipple:!0}),(0,T.jsx)(ge.Z,{iconPosition:"start",icon:(0,T.jsx)(en.Z,{}),label:r("\u5e38\u7528"),value:"saved",disableRipple:!0}),(0,T.jsx)(ge.Z,{iconPosition:"start",icon:(0,T.jsx)(nn.Z,{}),label:r("\u9644\u8fd1"),value:"nearby",disableRipple:!0}),(0,T.jsx)(ge.Z,{iconPosition:"start",icon:(0,T.jsx)(te.Z,{}),label:r("Collections"),value:"collections",disableRipple:!0})]})},rn=(o={background:function(e){return e.palette.background.default},minHeight:"36px"},(0,ue.Z)(o,"& .MuiTab-root",(0,ue.Z)({alignItems:"center",justifyContent:"center",paddingTop:0,paddingBottom:0,minHeight:"32px"},"&.Mui-selected",{color:function(e){return"dark"===e.palette.mode?e.palette.primary.main:"black"}})),(0,ue.Z)(o,"& .MuiTabs-flexContainer",{justifyContent:"center"}),(0,ue.Z)(o,"& .MuiTabs-indicator",{backgroundColor:function(e){return"dark"===e.palette.mode?e.palette.primary.main:"black"}}),o),on=t(3428),an=t(4183),ln=t(8296),sn=function(){var e=(0,_.$)().t,n=M();return"prerendering"!==navigator.userAgent&&n&&(n.WTCSGNL&&cn.includes(n.WTCSGNL.code)||n.WRAIN&&un.includes(n.WRAIN.code))?(0,T.jsx)(on.Z,{variant:"outlined",sx:dn,children:(0,T.jsx)(an.Z,{href:e("bad-weather-link"),target:"_blank",children:(0,T.jsx)(ln.Z,{children:(0,T.jsx)(R.Z,{children:e("bad-weather-text")})})})}):null},cn=["TC8NE","TC8SE","TC8NW","TC8SW","TC9","TC10"],un=["WARINR","WRAINB"],dn=(0,ue.Z)({borderRadius:function(e){return e.shape.borderRadius},margin:.2,height:"100%"},"> a",{height:"100%"}),pn=t(3433),xn=t(2547),fn=t(8310),gn=t(3135),hn=t(421),mn=i.forwardRef((function(e,n){var t=e.geolocation,r=e.homeTab,o=e.onChangeTab,a=(0,i.useContext)(g.Z),l=a.hotRoute,s=a.savedEtas,c=a.db,u=c.holidays,d=c.routeList,p=c.stopList,x=a.isRouteFilter,f=a.collections,h=(0,i.useMemo)((function(){return(0,gn.HD)(u,new Date)}),[u]),m=(0,i.useRef)(r),Z=(0,_.$)().t,b=(0,i.useState)(null),v=(0,L.Z)(b,2),y=v[0],C=v[1];(0,i.useImperativeHandle)(n,(function(){return{changeTab:function(e){m.current=e}}})),(0,i.useEffect)((function(){C(Zn({geolocation:t,hotRoute:l,savedEtas:s,collections:f,routeList:d,stopList:p,isRouteFilter:x,isTodayHoliday:h}))}),[t]);var k=(0,i.useMemo)((function(){return y?(0,T.jsx)(fn.Z,{disablePadding:!0,children:y.both.split("|").map((function(e,n){return Boolean(e)&&(0,T.jsx)(We.Z,{routeId:e},"route-shortcut-".concat(n))}))}):(0,T.jsx)(hn.D,{sx:{my:10}})}),[y]),w=(0,i.useMemo)((function(){if(null===y)return(0,T.jsx)(hn.D,{sx:{my:10}});var e=y.saved.split("|").every((function(e){return!e}));return(0,T.jsx)(i.Fragment,{children:e?(0,T.jsx)(R.Z,{sx:{marginTop:5},children:(0,T.jsx)("b",{children:Z("\u672a\u6709\u6536\u85cf\u8def\u7dda")})}):(0,T.jsx)(fn.Z,{disablePadding:!0,children:y.saved.split("|").map((function(e,n){return Boolean(e)&&(0,T.jsx)(We.Z,{routeId:e},"route-shortcut-".concat(n))}))})})}),[y,Z]),S=(0,i.useMemo)((function(){return y?(0,T.jsx)(fn.Z,{disablePadding:!0,children:y.nearby.split("|").map((function(e,n){return Boolean(e)&&(0,T.jsx)(We.Z,{routeId:e},"route-shortcut-".concat(n))}))}):(0,T.jsx)(hn.D,{sx:{my:10}})}),[y]),I=(0,i.useMemo)((function(){return(null===y||void 0===y?void 0:y.collections.length)>0?(0,T.jsx)(j.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:y.collections.map((function(e,n){var t=e.name,r=e.routes;return(0,T.jsxs)(j.Z,{children:[(0,T.jsx)(R.Z,{variant:"body1",sx:{textAlign:"left"},children:(0,T.jsx)("b",{children:t})}),(0,T.jsx)(fn.Z,{disablePadding:!0,children:r.split("|").map((function(e,n){return Boolean(e)&&(0,T.jsx)(We.Z,{routeId:e},"route-shortcut-".concat(n))}))}),0===r.split("|").filter((function(e){return Boolean(e)})).length&&(0,T.jsx)(R.Z,{sx:{marginTop:1},children:Z("\u672a\u6709\u6536\u85cf\u8def\u7dda")})]},"collection-".concat(n))}))}):(0,T.jsx)(R.Z,{sx:{marginTop:5},children:(0,T.jsx)("b",{children:Z("\u672a\u6709\u6536\u85cf\u8def\u7dda")})})}),[Z,y]);return(0,i.useMemo)((function(){return(0,T.jsxs)(xn.ZP,{index:jn.indexOf(m.current),onChangeIndex:function(e){console.log(e),o(jn[e])},children:[k,w,S,I]})}),[o,k,w,S,I])})),jn=["both","saved","nearby","collections"],Zn=function(e){var n=e.hotRoute,t=e.savedEtas,r=e.collections,o=e.geolocation,i=e.stopList,l=e.routeList,s=e.isRouteFilter,c=e.isTodayHoliday,u=t.concat(Object.entries(n).filter((function(e){var n=(0,L.Z)(e,2);n[0];return n[1]>5})).sort((function(e,n){return n[1]-e[1]})).map((function(e){return(0,L.Z)(e,1)[0]}))).filter((function(e,n,t){return t.indexOf(e)===n&&e.split("/")[0]in l})).map((function(e,n,t){var r=e.split("/"),a=(0,L.Z)(r,2),s=a[0],c=a[1],u=i[Object.values(l[s].stops).sort((function(e,n){return n.length-e.length}))[0][c]];return[e,(0,S.Sp)(o,u.location),t.length-n]})),d=Object.entries(i).map((function(e){return[].concat((0,pn.Z)(e),[(0,S.Sp)(e[1].location,o)])})).filter((function(e){return e[2]<1e3})).sort((function(e,n){return e[2]-n[2]})).slice(0,20).reduce((function(e,n){var t=(0,L.Z)(n,1)[0],r=[];return Object.entries(l).forEach((function(e){var n=(0,L.Z)(e,2),o=n[0],a=n[1];["kmb","nwfb","ctb","nlb"].forEach((function(e){a.stops[e]&&a.stops[e].includes(t)&&r.push(o+"/"+a.stops[e].indexOf(t))}))})),e.concat(r)}),[]),p=r.filter((function(e){return e.schedules.reduce((function(e,n){var t=n.day,r=n.start,o=n.end;if(e)return e;var a=new Date;a.setUTCHours(a.getUTCHours()+8);var i=a.getUTCDay();if(c&&0===t||t===i){var l=60*r.hour+r.minute,s=60*o.hour+o.minute,u=(60*a.getUTCHours()+a.getUTCMinutes())%1440;return l<=u&&u<=s}return!1}),!1)})).reduce((function(e,n){return e.push({name:n.name,routes:n.list}),e}),[]),x=function(e){return e.filter((function(e,n,t){return t.indexOf(e)===n})).filter((function(e){var n=e.split("/"),t=(0,L.Z)(n,1)[0];return l[t]&&(!s||(0,gn.x4)(t,l[t].freq,c))})).concat(Array(40).fill("")).slice(0,40).join("|")};return{saved:x(u.sort((function(e,n){return e[2]-n[2]})).map((function(e){return e[0]})).slice(0,40)),nearby:x(d),both:x([].concat(u.sort((function(e,n){return e[1]-n[1]})).map((function(e){return e[0]})).slice(0,40)).concat(d)),collections:p.map((function(e){return(0,a.Z)((0,a.Z)({},e),{},{routes:x(e.routes)})}))}},bn=function(){var e=(0,_.$)().t,n=(0,i.useContext)(g.Z),t=n.db.updateTime,r=n.renewDb,o=(0,i.useMemo)((function(){return Date.now()>t+24192e5}),[t]);return"prerendering"!==navigator.userAgent&&o?(0,T.jsx)(on.Z,{variant:"outlined",sx:vn,onClick:r,children:(0,T.jsx)(an.Z,{children:(0,T.jsx)(ln.Z,{children:(0,T.jsx)(R.Z,{children:e("db-renew-text")})})})}):null},vn={borderRadius:function(e){return e.shape.borderRadius},margin:.2,height:"100%",display:"flex"},yn=function(){var e,n=(0,i.useContext)(g.Z),t=n.AppTitle,r=n.geolocation,o=(0,_.$)(),a=o.t,l=o.i18n,s=(0,i.useRef)(null),c=localStorage.getItem("homeTab"),u=(0,i.useState)("both"===(e=c)||"saved"===e||"nearby"===e||"collections"===e?c:"both"),d=(0,L.Z)(u,2),p=d[0],x=d[1];(0,i.useEffect)((function(){(0,S.ND)({title:"".concat(a("Dashboard")," - ").concat(a(t)),description:a("home-page-description"),lang:l.language})}),[l.language]);var f=(0,i.useState)(r),h=(0,L.Z)(f,2),m=h[0],j=h[1],Z=(0,i.useRef)(Xe()((function(){j(r)}),1e3)).current;(0,i.useEffect)((function(){Z(r)}),[r]);var b=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];x(e),console.log(e),localStorage.setItem("homeTab",e),s.current&&n&&s.current.changeTab(e)};return(0,T.jsxs)(Ve.Z,{sx:Cn,square:!0,elevation:0,children:[(0,T.jsx)(R.Z,{component:"h1",style:Je.Z,children:"".concat(a("Dashboard")," - ").concat(a(t))}),(0,T.jsx)(R.Z,{component:"h2",style:Je.Z,children:a("home-page-description")}),(0,T.jsx)(tn,{homeTab:p,onChangeTab:b}),(0,T.jsx)(sn,{}),(0,T.jsx)(bn,{}),(0,T.jsx)(mn,{ref:s,homeTab:p,geolocation:m,onChangeTab:b})]})},Cn={background:function(e){return"dark"===e.palette.mode?e.palette.background.default:"white"},textAlign:"center",display:"flex",flexDirection:"column",overflow:"auto",width:"100%"},kn=t(5640),wn=function(e){var n=e.name,t=e.delta,r=e.value,o=e.id;window.gtag?window.gtag("event",n,{value:t,metric_id:o,metric_value:r,metric_delta:t}):console.log("gtag not found")},_n=function(e){e&&e instanceof Function&&t.e(27).then(t.bind(t,4027)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),r(e),o(e),a(e),i(e)}))},Sn=t(1422),Tn=t(2586),In=function(){var e=(0,_.$)().t,n=(0,i.useContext)(g.Z),t=n.savedEtas,r=n.setSavedEtas,o=n.collections,a=n.setCollections,l=(0,i.useState)(JSON.stringify({savedEtas:t,collections:o},null,2)),s=(0,L.Z)(l,2),c=s[0],u=s[1],d=(0,i.useState)(!1),p=(0,L.Z)(d,2),x=p[0],f=p[1];return(0,T.jsxs)(j.Z,{sx:Wn,children:[(0,T.jsx)(R.Z,{variant:"h6",sx:{textAlign:"center"},children:e("\u8cc7\u6599\u532f\u51fa\u532f\u5165")}),(0,T.jsxs)(j.Z,{sx:{display:"flex",flexDirection:"column",m:1},children:[(0,T.jsx)(xe.Z,{multiline:!0,maxRows:10,value:c,onChange:function(e){var n=e.target.value;u(n);try{var t=JSON.parse(n),o=t.savedEtas,i=t.collections;Array.isArray(o)&&r(o.filter((function(e){return"string"===typeof e||e instanceof String}))),Array.isArray(i)&&a(i)}catch(l){}}}),(0,T.jsx)(j.Z,{sx:{m:1},children:(0,T.jsx)(P.Z,{onClick:function(){var e;null===(e=navigator.clipboard)||void 0===e||e.writeText(JSON.stringify(t,null,2)).then((function(){f(!0)}))},children:(0,T.jsx)(Tn.Z,{})})})]}),(0,T.jsx)(Sn.Z,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:x,autoHideDuration:1500,onClose:function(){f(!1)},message:e("\u5df2\u8907\u88fd\u5230\u526a\u8cbc\u7c3f")})]})},Wn={justifyContent:"center",flex:1},An=t(9840),Rn=t(2600),Nn=t(3213),Dn=t(7018),Pn=t(5504),En=t(7181),Hn=t(6267),Ln=function(){var e=(0,_.$)().t;return(0,T.jsxs)(Ve.Z,{sx:Mn,square:!0,elevation:0,children:[(0,T.jsxs)(fn.Z,{sx:{py:0},children:[(0,T.jsxs)(An.Z,{component:"a",href:"https://t.me/hkbusapp",target:"_blank",rel:"noreferrer",children:[(0,T.jsx)(Rn.Z,{children:(0,T.jsx)(D.Z,{children:(0,T.jsx)(Dn.Z,{})})}),(0,T.jsx)(Nn.Z,{primary:e("Telegram \u4ea4\u6d41\u5340"),secondary:"https://t.me/hkbusapp"})]}),(0,T.jsxs)(An.Z,{component:"a",href:"mailto:info@hkbus.app",target:"_blank",rel:"noreferrer",children:[(0,T.jsx)(Rn.Z,{children:(0,T.jsx)(D.Z,{children:(0,T.jsx)(Pn.Z,{})})}),(0,T.jsx)(Nn.Z,{primary:e("Email"),secondary:"info@hkbus.app"})]}),(0,T.jsxs)(An.Z,{component:"a",href:"https://instagram.com/hkbus.app",target:"_blank",rel:"noreferrer",children:[(0,T.jsx)(Rn.Z,{children:(0,T.jsx)(D.Z,{children:(0,T.jsx)(En.Z,{})})}),(0,T.jsx)(Nn.Z,{primary:e("Instagram"),secondary:"@hkbus.app"})]}),(0,T.jsxs)(An.Z,{component:"a",href:"https://twitter.com/hkbusApp",target:"_blank",rel:"noreferrer",children:[(0,T.jsx)(Rn.Z,{children:(0,T.jsx)(D.Z,{children:(0,T.jsx)(Hn.Z,{})})}),(0,T.jsx)(Nn.Z,{primary:e("Twitter"),secondary:"@hkbus.app"})]})]}),(0,T.jsx)(R.Z,{variant:"body1",children:e("\u6b61\u8fce\u610f\u898b\u53ca\u6280\u8853\u4ea4\u6d41")})]})},Mn={background:function(e){return"dark"===e.palette.mode?e.palette.background.default:"white"},textAlign:"center",display:"flex",flexDirection:"column",overflow:"auto",width:"100%",flex:1,gap:5,"& .MuiAvatar-colorDefault":{color:function(e){return"dark"===e.palette.mode?e.palette.background.default:"white"}}},$n=function(e){var n=e.url;return(0,i.useEffect)((function(){window.location.replace(n)}),[n]),(0,T.jsx)(R.Z,{variant:"body1",children:"Redirecting..."})},Fn=(0,l.ZP)((function(){return Promise.all([t.e(418),t.e(731)]).then(t.bind(t,1731))})),On=(0,l.ZP)((function(){return Promise.all([t.e(73),t.e(516)]).then(t.bind(t,5516))})),zn=(0,l.ZP)((function(){return Promise.all([t.e(512),t.e(418),t.e(967),t.e(635)]).then(t.bind(t,1635))})),Bn=(0,l.ZP)((function(){return Promise.all([t.e(432),t.e(724)]).then(t.bind(t,5724))})),Un=(0,l.ZP)((function(){return t.e(370).then(t.bind(t,3370))})),Gn=(0,l.ZP)((function(){return t.e(481).then(t.bind(t,7481))})),qn=function(){var e=(0,i.useContext)(g.Z),n=e.colorMode,t=e.analytics,r=(0,_.$)().i18n.language;t&&_n(wn);var o=(0,i.useMemo)((function(){return(0,s.Z)(Vn(n),[n])}),[n]);return(0,T.jsx)(c.Z,{injectFirst:!0,children:(0,T.jsx)(u.Z,{theme:o,children:(0,T.jsx)(x.C,{value:Kn,children:(0,T.jsx)(d.VK,{children:(0,T.jsx)(kn.N,{children:(0,T.jsxs)(p.Z5,{children:[(0,T.jsx)(p.AW,{path:"/",element:(0,T.jsx)(p.Fg,{to:"/".concat(r)})}),(0,T.jsxs)(p.AW,{path:"/:lang",element:(0,T.jsx)(Ke,{}),children:[(0,T.jsx)(p.AW,{path:"route/:id",element:(0,T.jsx)(Fn,{})}),(0,T.jsx)(p.AW,{path:"route/:id/:panel",element:(0,T.jsx)(Fn,{})}),(0,T.jsx)(p.AW,{path:"settings",element:(0,T.jsx)(Bn,{})}),(0,T.jsx)(p.AW,{path:"qr-code",element:(0,T.jsx)(In,{})}),(0,T.jsx)(p.AW,{path:"board",element:(0,T.jsx)(On,{})}),(0,T.jsx)(p.AW,{path:"search",element:(0,T.jsx)(zn,{})}),(0,T.jsx)(p.AW,{path:"privacy",element:(0,T.jsx)(Un,{})}),(0,T.jsx)(p.AW,{path:"terms",element:(0,T.jsx)(Gn,{})}),(0,T.jsx)(p.AW,{path:"support",element:(0,T.jsx)(Ln,{})}),(0,T.jsx)(p.AW,{path:"patreon",element:(0,T.jsx)($n,{url:"https://www.patreon.com/hkbus"})}),(0,T.jsx)(p.AW,{path:"",element:(0,T.jsx)(yn,{})})]})]})})})})})})},Kn=(0,f.Z)({key:"hkbus",speedy:!("prerendering"===navigator.userAgent)}),Vn=function(e){return{typography:{fontFamily:"'Chiron Sans HK Pro WS', sans-serif",h6:{fontSize:"1.2rem",fontWeight:700}},palette:(0,a.Z)({mode:e},"light"===e?{background:{default:"#fedb00"},primary:{main:"#fedb00",contrastText:"rgba(0, 0, 0, 0.12)"}}:{background:{default:"#000",contrast:"rgba(255, 255, 255, 0.12)"},primary:{main:"#fedb00"}}),elements:{MuiCssBaseline:{styleOverrides:{body:{fontSize:"0.875rem",lineHeight:1.43,scrollbarColor:"#3f3f3f",scrollbarWidth:"thin"}}}}}}},5640:function(e,n,t){t.d(n,{N:function(){return l}});var r=t(9439),o=t(7313),a=t(6417),i=o.createContext({}),l=function(e){var n=(0,o.useState)({start:null,end:null}),t=(0,r.Z)(n,2),l=t[0],s=t[1],c=(0,o.useState)("ready"),u=(0,r.Z)(c,2),d=u[0],p=u[1],x=(0,o.useState)([]),f=(0,r.Z)(x,2),g=f[0],h=f[1],m=(0,o.useState)({resultIdx:0,stopIdx:[0,0]}),j=(0,r.Z)(m,2),Z=j[0],b=j[1];return(0,a.jsx)(i.Provider,{value:{locations:l,setLocations:s,status:d,setStatus:p,result:g,setResult:h,resultIdx:Z,setResultIdx:b},children:e.children})};n.Z=i},9878:function(e,n,t){t.d(n,{e:function(){return c}});var r=t(1413),o=t(9439),a=t(7313),i=t(4511),l=t(7420),s=t(6060),c=function(e){var n=(0,a.useContext)(s.Z),t=n.db.routeList,c=n.isVisible,d=n.refreshInterval,p=e.split("/"),x=(0,o.Z)(p,2),f=x[0],g=x[1],h=t[f]||u,m=(0,a.useState)(null),j=(0,o.Z)(m,2),Z=j[0],b=j[1],v=(0,i.$)().i18n.language,y=(0,a.useRef)(!1),C=(0,a.useCallback)((function(){return c&&"prerendering"!==navigator.userAgent?(0,l.fetchEtas)((0,r.Z)((0,r.Z)({},h),{},{seq:parseInt(g,10),language:v})).then((function(e){y.current&&b(e)})):(b(null),new Promise((function(e){return e([])})))}),[c,v,h,g]);return(0,a.useEffect)((function(){y.current=!0;var e=setInterval((function(){C()}),d);return C(),function(){y.current=!1,clearInterval(e)}}),[e,C,d]),Z},u={co:[""],stops:{"":[""]},dest:{zh:"",en:""},bound:"",nlbId:0,gtfsId:"",fares:[],faresHoliday:[]}},421:function(e,n,t){t.d(n,{D:function(){return p},u:function(){return d}});var r=t(1413),o=t(5987),a=t(7313),i=t(9176),l=t(5281),s=t(6417),c=["sx","color"],u=["sx","color"],d=a.forwardRef((function(e,n){var t=e.sx,a=e.color,l=(0,o.Z)(e,c);return(0,s.jsx)(i.Z,(0,r.Z)({color:null!==a&&void 0!==a?a:"inherit",sx:(0,r.Z)({m:1,height:5,borderRadius:5},t),ref:n},l))})),p=a.forwardRef((function(e,n){var t=e.sx,a=e.color,i=(0,o.Z)(e,u);return(0,s.jsx)(l.Z,(0,r.Z)({color:null!==a&&void 0!==a?a:"inherit",sx:(0,r.Z)({m:1},t),ref:n},i))}))},1660:function(e,n,t){t.d(n,{Z:function(){return w}});var r=t(9439),o=t(7313),a=t(7216),i=t(3213),l=t(1113),s=t(7829),c=t(9536),u=t(6480),d=t(8467),p=t(2135),x=t(5823),f=t(6060),g=t(4511),h=t(9878),m=t(6417),j=function(e){var n=e.routeId,t=(0,g.$)(),r=t.t,a=t.i18n,s=(0,o.useContext)(f.Z).etaFormat,c=(0,h.e)(n),u=function(e){if(!e||!e.eta)return"";var n=Math.round((new Date(e.eta).getTime()-(new Date).getTime())/60/1e3);if(!Number.isInteger(n))return e.remark[a.language];var t=e.eta.slice(11,16),o=n<1?"- ".concat(r("\u5206\u9418")):"".concat(n," ").concat(r("\u5206\u9418"));switch(s){case"exact":return t;case"diff":return o;default:return"".concat(t," (").concat(o,")")}};return(0,m.jsx)(i.Z,{primary:(0,m.jsx)(l.Z,{component:"h5",color:"textPrimary",sx:{whiteSpace:"nowrap"},children:c?u(c[0]):""}),secondary:(0,m.jsxs)(l.Z,{variant:"h6",color:"textSecondary",sx:b,children:[c?u(c[1]):"",(0,m.jsx)("br",{}),c?u(c[2]):""]}),sx:Z})},Z={textAlign:"right"},b={fontSize:"0.875rem",fontWeight:"400",lineHeight:"1.43",whiteSpace:"nowrap",textAlign:"right"},v=t(9530),y=function(e){var n=e.name,t=e.location,r=e.fares,a=e.faresHoliday,i=e.seq,l=(0,g.$)().t,s=(0,o.useContext)(f.Z),c=s.geoPermission,u=s.geolocation,d=[r&&r[i]?"$"+r[i]:"",a&&a[i]?"$"+a[i]:""].filter((function(e){return e})).join(", "),p=(0,x.Qi)(t,u),h=p.distance,j=p.unit,Z=p.decimalPlace;return"granted"!==c||0===t.lat?(0,m.jsx)(m.Fragment,{children:n+"\u3000"+(d?"("+d+")":"")}):(0,m.jsx)(m.Fragment,{children:n+" - "+h.toFixed(Z)+l(j)+"\u3000"+(d?"("+d+")":"")})},C={co:[""],stops:{"":[""]},dest:{zh:"",en:""},bound:"",nlbId:0,fares:[],faresHoliday:[]},k={location:{lat:0,lng:0},name:{zh:"",en:""}},w=function(e){var n=e.routeId,t=e.disabled,h=void 0!==t&&t,Z=(0,g.$)(),b=Z.t,w=Z.i18n,A=(0,o.useContext)(f.Z),R=A.db,N=R.routeList,D=R.stopList,P=A.vibrateDuration,E=n.split("-"),H=(0,r.Z)(E,1)[0],L=n.split("/"),M=(0,r.Z)(L,2),$=M[0],F=M[1],O=N[$]||C,z=O.co,B=O.stops,U=O.dest,G=O.fares,q=O.faresHoliday,K=D[_(z,B)[parseInt(F,10)]]||k,V=(0,d.s0)();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(a.ZP,{component:h?void 0:p.rU,to:"/".concat(w.language,"/route/").concat($.toLowerCase()),onClick:h?function(){}:function(e){e.preventDefault(),(0,x.tp)(P),setTimeout((function(){V("/".concat(w.language,"/route/").concat(n.toLowerCase()))}),0)},sx:S,children:[(0,m.jsx)(i.Z,{primary:(0,m.jsx)(v.Z,{routeNo:H})}),(0,m.jsx)(i.Z,{primary:(0,m.jsxs)(l.Z,{component:"h3",variant:"h6",color:"textPrimary",sx:I,children:[(0,m.jsx)("span",{children:b("\u5f80")}),(0,m.jsx)("b",{children:(0,x.iF)(U[w.language])})]}),secondary:(0,m.jsx)(y,{name:(0,x.iF)(K.name[w.language]),location:K.location,fares:G,faresHoliday:q,seq:parseInt(F,10)}),secondaryTypographyProps:{component:"h4",variant:"subtitle2"},sx:T}),h?(0,m.jsx)(s.Z,{sx:W,children:(0,m.jsx)(u.Z,{})}):(0,m.jsx)(j,{routeId:n})]}),(0,m.jsx)(c.Z,{})]})},_=function(e,n){for(var t=0;t<e.length;++t)if(e[t]in n)return n[e[t]]},S={display:"grid",gap:function(e){return e.spacing(1)},gridTemplateColumns:"15% 1fr minmax(18%, max-content)",padding:function(e){return"".concat(e.spacing(.5)," ").concat(e.spacing(1))},color:"rgba(0,0,0,0.87)"},T={overflow:"hidden"},I={display:"flex",alignItems:"baseline","& > span":{fontSize:"0.85rem",marginRight:function(e){return e.spacing(.5)}}},W={color:function(e){return e.palette.text.primary},flex:1,display:"flex",alignItems:"center",justifyContent:"center"}},9530:function(e,n,t){var r=t(9439),o=(t(7313),t(1113)),a=t(6417);n.Z=function(e){var n=e.routeNo,t=e.component,l=e.align,s=n.match(/[0-9][A-Z]+$/)?[n.slice(0,-1),n.slice(-1)]:[n,""],c=(0,r.Z)(s,2),u=c[0],d=c[1];return(0,a.jsxs)(o.Z,{component:t||"h2",align:l,variant:"caption",color:"textPrimary",sx:i,children:[(0,a.jsx)("span",{children:u}),(0,a.jsx)("span",{children:d})]})};var i={lineHeight:"normal",display:"inline","& > span:nth-child(1)":{fontSize:"1.5rem",fontFamily:'"Oswald", sans-serif'},"& > span:nth-child(2)":{fontSize:"1.2rem",fontFamily:'"Oswald", sans-serif'}}},3135:function(e,n,t){t.d(n,{HD:function(){return i},x4:function(){return l}});var r=t(9439),o={266:[0,0,1,1,1,0,0],271:[0,1,1,1,1,0,0],272:[0,0,0,0,0,1,0],287:[0,1,1,1,1,1,0],288:[0,0,0,0,0,0,1],319:[0,1,1,1,1,1,1],320:[1,0,0,0,0,0,0],415:[0,1,1,1,1,1,0],416:[1,0,0,0,0,0,1],447:[0,1,1,1,1,1,1],448:[1,0,0,0,0,0,0],480:[1,0,0,0,0,0,1],511:[1,1,1,1,1,1,1],31:[0,1,1,1,1,1,0],63:[0,1,1,1,1,1,1],111:[1,1,0,1,1,1,1]},a=function(e,n){var t=24*e*60;return t+=60*parseInt(n.slice(0,2),10)+parseInt(n.slice(2),10)},i=function(e,n){return e.includes("".concat(n.getFullYear()).concat(("0"+(n.getMonth()+1)).slice(-2)).concat(("0"+n.getDate()).slice(-2)))},l=function(e,n,t){if(!n)return!0;var i=!1,l=new Date,s=a(t?0:l.getDay(),("0"+l.getHours()).slice(-2)+("0"+l.getMinutes()).slice(-2));return Object.entries(n).forEach((function(n){var t=(0,r.Z)(n,2),l=t[0],c=t[1];try{o[l].forEach((function(e,n){e&&Object.entries(c).forEach((function(e){var t,o,l,c=(0,r.Z)(e,2),u=c[0],d=c[1],p=a(n,u),x=a(n,d?d[0]:u);i=i||(o=x,(t=p)-60<=(l=s)&&l<=o+60||t-60<=l+10080&&l+10080<=o+60)}))}))}catch(u){console.log(e+" has unknown service ID")}})),i}}}]);