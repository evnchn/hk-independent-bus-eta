"use strict";(self.webpackChunkhk_independent_bus_eta=self.webpackChunkhk_independent_bus_eta||[]).push([[4],{4004:function(n,t,e){e.r(t);var o=e(9439),a=e(7313),c=e(941),i=e(178),l=e(7829),u=e(9099),r=e(4511),s=e(3475),d=e.n(s),f=e(3155),g=e.n(f),p=e(5823),h=e(6060),m=e(421),x=e(6417);t.default=function(n){var t=n.id,e=n.route,s=n.idx,f=void 0===s?-1:s,Z=n.dest,v=n.stop,I=n.setIsCopied,w=n.event,P=(0,a.useState)(!1),E=(0,o.Z)(P,2),_=E[0],B=E[1],F=(0,a.useContext)(h.Z),D=F.AppTitle,J=F.colorMode,S=(0,r.$)(),A=S.t,M=S.i18n,T=(0,a.useState)(""),W=(0,o.Z)(T,2),$=W[0],q=W[1];(0,a.useEffect)((function(){!1!==_&&Promise.all([d().toPng(document.getElementById("route-eta-header"),{bgcolor:"light"===J?"#fedb00":"#000"}),document.getElementById("route-map")&&d().toPng(document.getElementById("route-map")),d().toPng(document.getElementById("stop-".concat(f)))]).then((function(n){return g()(n.filter((function(n){return n})).map((function(n){return n.substr(22)})),{direction:!0,isPng:!0})})).then((function(n){q(n)}))}),[_]),(0,a.useEffect)((function(){B(!0)}),[w]);var z=(0,a.useCallback)((function(){(0,p.I)("https://".concat(window.location.hostname,"/").concat(M.language,"/route/").concat(t),"".concat(f+1,". ").concat((0,p.iF)(v.name[M.language])," - ").concat(e," ").concat(A("\u5f80")," ").concat((0,p.iF)(Z[M.language])," - ").concat(A(D))).then((function(){navigator.clipboard&&I(!0)})).finally((function(){B(!1)}))}),[p.I,M.language,t,f,v.name,e]),G=(0,a.useCallback)((function(){(0,p.JP)($,"https://".concat(window.location.hostname,"/").concat(M.language,"/route/").concat(t),"".concat(f+1,". ").concat((0,p.iF)(v.name[M.language])," - ").concat(e," ").concat(A("\u5f80")," ").concat((0,p.iF)(Z[M.language])," - https://hkbus.app/")).then((function(){navigator.clipboard&&I(!0)})).finally((function(){B(!1)}))}),[p.JP,$,M.language,t,f,e]);return(0,x.jsx)(c.Z,{sx:b,onClose:function(){return B(!1)},open:_,children:(0,x.jsxs)(i.Z,{maxWidth:"xs",sx:k,children:[$&&(0,x.jsxs)(l.Z,{sx:y,children:[(0,x.jsx)("img",{src:$,style:{width:"100%"},alt:""}),(0,x.jsxs)(l.Z,{sx:C,children:[(0,x.jsx)(u.Z,{sx:j,onClick:z,children:A("\u4ee5\u93c8\u7d50\u5206\u4eab")}),(0,x.jsx)(u.Z,{sx:j,onClick:G,children:A("\u4ee5\u5716\u7247\u5206\u4eab")})]})]}),!$&&(0,x.jsx)(m.D,{color:"inherit"})]})})};var b={display:"flex",alignItems:"center"},k={display:"flex",justifyContent:"center",outline:"none"},y={display:"flex",flexDirection:"column",justifyContent:"center"},C={display:"flex",backgroundColor:function(n){return"dark"===n.palette.mode?n.palette.background.default:"#fedb00"}},j={flex:1,border:"1px solid rgba(255, 255, 255, 0.3)",color:function(n){return"dark"===n.palette.mode?n.palette.primary.main:n.palette.text.primary}}}}]);